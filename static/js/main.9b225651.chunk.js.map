{"version":3,"sources":["page/SelectTimeZone.tsx","page/TimeDisplay.tsx","page/App.tsx","services/guessTimestampForm.ts","index.tsx"],"names":["allNames","moment","tz","names","suggestions","Array","from","Set","map","x","zoneAbbr","concat","SelectTimeZone","tzs","addTZ","currentInput","setCurrentInput","useState","suggestionSet","useMemo","filter","indexOf","style","width","TextInput","icon","AddCircle","dropHeight","focusIndicator","onChange","e","currentTarget","value","onSuggestionSelect","suggestion","length","TimeDisplay","guessedTime","DataTable","columns","property","header","Text","primary","render","d","time","format","fontFamily","data","AppBar","props","Box","tag","direction","align","justify","background","pad","left","right","vertical","elevation","zIndex","theme","global","font","family","size","height","colors","focus","App","stamp","setStamp","useQueryParam","StringParam","setTZs","withDefault","ArrayParam","guess","timestamp","parsedStamp","parseInt","options","type","bestOption","now","forEach","option","index","timeToBest","Math","abs","diff","guessTimeStampForm","useCallback","target","Grommet","flex","overflow","horizontal","max","Clock","defaultValue","undefined","placeholder","ReactDOM","StrictMode","ReactRouterRoute","Route","document","getElementById"],"mappings":"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","file":"static/js/main.9b225651.chunk.js","sourcesContent":["import { TextInput } from \"grommet\";\nimport { AddCircle } from \"grommet-icons\";\n\nimport moment from \"moment-timezone\";\nimport { useMemo, useState } from \"react\";\n\nconst allNames = moment.tz.names();\nconst allAbbr = Array.from(\n  new Set(moment.tz.names().map((x) => moment.tz(x).zoneAbbr()))\n);\n\nconst suggestions = allAbbr.concat(allNames);\n\ninterface SelectTimeZoneParams {\n  tzs: Array<String>;\n  addTZ: (tz: string) => void;\n}\n\nexport const SelectTimeZone: React.FunctionComponent<SelectTimeZoneParams> = ({\n  tzs,\n  addTZ,\n}) => {\n  const [currentInput, setCurrentInput] = useState(\"\");\n  const suggestionSet = useMemo(\n    () => suggestions.filter((x) => x.indexOf(currentInput) >= 0),\n    [currentInput]\n  );\n\n  return (\n    <div style={{ width: \"100%\" }}>\n      <TextInput\n        icon={<AddCircle />}\n        dropHeight=\"small\"\n        focusIndicator={false}\n        key={`select_${tzs.length}`}\n        suggestions={suggestionSet}\n        onChange={(e) => setCurrentInput(e.currentTarget.value)}\n        onSuggestionSelect={(e) => {\n          addTZ(e.suggestion);\n        }}\n      />\n    </div>\n  );\n};\n","import { DataTable, Text } from \"grommet\";\nimport { Guess } from \"../services/guessTimestampForm\";\n\ninterface TimeDisplayProps {\n  guessedTime: Guess | null;\n  tzs: string[];\n}\n\nexport const TimeDisplay = ({ guessedTime, tzs }: TimeDisplayProps) => {\n  return (\n    <>\n      <DataTable\n        columns={[\n          {\n            property: \"name\",\n            header: <Text>Name</Text>,\n            primary: true,\n            render: (d) => d,\n          },\n          {\n            property: \"offset\",\n            header: \"Offset\",\n            render: (d) =>\n              guessedTime == null ? \"???\" : guessedTime.time.tz(d).format(\"z\"),\n          },\n          {\n            property: \"time\",\n            header: \"Time\",\n            render: (d) => (\n              <span style={{ fontFamily: \"'Roboto Mono', monospace\" }}>\n                {guessedTime\n                  ? guessedTime.time.tz(d).format(\"YYYY-MM-DD HH:mm:ss\")\n                  : \"0000-00-00 00:00:00\"}\n              </span>\n            ),\n          },\n        ]}\n        data={tzs}\n      />\n    </>\n  );\n};\n","import { Box, Grommet, TextInput, Text } from \"grommet\";\nimport { Clock } from \"grommet-icons\";\nimport moment from \"moment\";\nimport { useMemo } from \"react\";\nimport { useCallback } from \"react\";\nimport {\n  useQueryParam,\n  StringParam,\n  withDefault,\n  ArrayParam,\n} from \"use-query-params\";\nimport { guessTimeStampForm } from \"../services/guessTimestampForm\";\nimport { SelectTimeZone } from \"./SelectTimeZone\";\nimport { TimeDisplay } from \"./TimeDisplay\";\n\nconst AppBar = (props: any) => (\n  <Box\n    tag=\"header\"\n    direction=\"row\"\n    align=\"center\"\n    justify=\"between\"\n    background=\"brand\"\n    pad={{ left: \"medium\", right: \"small\", vertical: \"small\" }}\n    elevation=\"medium\"\n    style={{ zIndex: \"1\" }}\n    {...props}\n  />\n);\n\nconst theme = {\n  global: {\n    font: {\n      family: \"Roboto\",\n      size: \"18px\",\n      height: \"20px\",\n    },\n    colors: {\n      focus: \"#0CA7D3\",\n    },\n  },\n};\n\nfunction App() {\n  const [stamp, setStamp] = useQueryParam(\"t\", StringParam);\n  const [tzs, setTZs] = useQueryParam(\n    \"z\",\n    withDefault(ArrayParam, [\"UTC\", moment.tz.guess()])\n  );\n\n  const guessedTime = useMemo(\n    () => (stamp ? guessTimeStampForm(stamp) : null),\n    [stamp]\n  );\n\n  const onChange = useCallback(\n    (e) => {\n      setStamp(e.target.value);\n    },\n    [setStamp]\n  );\n\n  return (\n    <Grommet theme={theme}>\n      <AppBar>Pretty Timestamp</AppBar>\n      <Box pad=\"small\" direction=\"row\" flex overflow={{ horizontal: \"hidden\" }}>\n        <Box flex align=\"center\" justify=\"center\">\n          <Box flex direction=\"row\">\n            <Box width={{ max: \"medium\" }} pad=\"small\">\n              <TextInput\n                icon={guessedTime ? <Text>{guessedTime.type}</Text> : <Clock />}\n                defaultValue={stamp ?? undefined}\n                onChange={onChange}\n                placeholder=\"timestamp...\"\n              />\n            </Box>\n            <Box width={{ max: \"medium\" }} pad=\"small\">\n              <SelectTimeZone\n                tzs={tzs as string[]}\n                addTZ={(tz) => setTZs([...tzs, tz])}\n              ></SelectTimeZone>\n            </Box>\n          </Box>\n          <TimeDisplay guessedTime={guessedTime} tzs={tzs as string[]} />\n        </Box>\n      </Box>\n    </Grommet>\n  );\n}\n\nexport default App;\n","import moment from \"moment-timezone\";\n\nexport interface Guess {\n  type: string;\n  time: moment.Moment;\n}\n\nexport const guessTimeStampForm = (timestamp: string) => {\n  const parsedStamp = parseInt(timestamp, 10);\n  const options = [\n    { type: \"s\", time: moment(parsedStamp * 1000) },\n    { type: \"ms\", time: moment(parsedStamp) },\n    { type: \"ns\", time: moment(parsedStamp / 1000) },\n  ];\n\n  let bestOption = options[0];\n  const now = moment();\n  options.forEach((option, index) => {\n    if (index === 0) return;\n\n    const timeToBest = Math.abs(now.diff(bestOption.time));\n    const timeToOption = Math.abs(now.diff(option.time));\n\n    if (timeToOption < timeToBest) {\n      bestOption = option;\n    }\n  });\n  return bestOption;\n};\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./page/App\";\nimport { QueryParamProvider } from \"use-query-params\";\nimport { BrowserRouter as Router, Route } from \"react-router-dom\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <Router>\n      <QueryParamProvider ReactRouterRoute={Route}>\n        <App />\n      </QueryParamProvider>\n    </Router>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}